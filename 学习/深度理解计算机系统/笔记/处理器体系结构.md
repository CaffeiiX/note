大纲
- 定义指令集`Y86-64`
- 描述处理器中的使用的基本构件块，以及它们如何连接起来和操作
- 给出一个基于顺序操作、功能正确的处理器
- 基于上述基础，创建一个流水线化的处理器。
## Y86-64 指令集体系结构
![[Pasted image 20230425230536.png]]
### Y86-64指令
![[Pasted image 20230425230602.png]]
### 指令编码
指令编码的第一个字节表明指令的类型，分为两部分
代码部分+功能部分，代码部分如上图所示是从`0x0-0xB`，表明了指令的功能，而功能部分代表了统一类型的指令的不同类型。
![[Pasted image 20230425231048.png]]
寄存器标识符如下
![[Pasted image 20230425231134.png]]
操作数指令等需要更长的指令编码，即需要附加的寄存器指示符字节，指定一个或者两个寄存器，当`push`等只需要一个寄存器的时候，另一个会置做`0xF`。有些需要附加一个4字节常数字，作为`irmovq`的目的地址。
指令集要求字节编码必须有唯一的解释
